webpackJsonp([2,12],{"0T94":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("BO1k"),s=i.n(a),l=i("Dd8w"),o=i.n(l),n=i("NYxO"),c=i("wliq"),r=i("vLgD"),d={data:function(){return{form:{title:"",begintime:"",endtime:"",first_cateid:"",second_cateid:"",goodsid:"",status:1},formLabelWidth:"120px",seckillId:this.$route.params.id,second_catelist:[],goodslist:[],dateValue:[]}},mounted:function(){this.changeBreadList(),this.requestCateList()},computed:o()({},Object(n.c)({cateList:"cate/cateList"})),methods:o()({},Object(n.b)({requestBreadList:"breadListActions",requestSeckillList:"seckill/seckillListActions",requestCateList:"cate/cateListActions"}),{changeCate:function(t){this.second_catelist=[],this.goodslist=[],this.form.second_cateid="",this.form.goodsid="";var e=!0,i=!1,a=void 0;try{for(var l,o=s()(this.cateList);!(e=(l=o.next()).done);e=!0){var n=l.value;t==n.id&&(this.second_catelist=n.children)}}catch(t){i=!0,a=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw a}}console.log(this.second_catelist)},changeSecondCate:function(){var t=this;this.goodslist=[],this.form.goodsid="",Object(r.L)({fid:this.form.first_cateid,sid:this.form.second_cateid}).then(function(e){t.goodslist=e.data.list})},confirm:function(){var t=this;this.form.begintime=this.dateValue[0],this.form.endtime=this.dateValue[1],Object(r.g)(this.form).then(function(e){Object(c.b)(e.data.msg),t.requestSeckillList(),t.cancel()})},seckillDetail:function(){var t=this;Object(r.G)({id:this.seckillId}).then(function(e){t.changeCate(e.data.list.first_cateid),Object(r.L)({fid:e.data.list.first_cateid,sid:e.data.list.second_cateid}).then(function(e){t.goodslist=e.data.list}),t.form=e.data.list,t.dateValue=[],t.dateValue.push(t.form.begintime),t.dateValue.push(t.form.endtime)})},update:function(){var t=this;this.form.id=this.seckillId,this.form.begintime=this.dateValue[0],this.form.endtime=this.dateValue[1],Object(r.T)(this.form).then(function(e){Object(c.b)(e.data.msg),t.requestSeckillList(),t.cancel(),t.$router.push("/seckill")})},cancel:function(){this.form={title:"",begintime:"",endtime:"",first_cateid:"",second_cateid:"",goodsid:"",status:1},this.second_catelist=[],this.goodslist=[],this.dateValue=""},changeBreadList:function(){void 0==this.seckillId?(this.requestBreadList([{path:"/",name:"首页"},{path:"/seckill",name:"活动列表"}]),this.cancel()):0==this.seckillId?this.requestBreadList([{path:"/",name:"首页"},{path:"/seckill",name:"活动列表"},{name:"活动添加"}]):(this.requestBreadList([{path:"/",name:"首页"},{path:"/seckill",name:"活动列表"},{name:"活动修改"}]),this.seckillDetail())}}),watch:{$route:{deep:!0,handler:function(t){this.seckillId=t.params.id,this.changeBreadList()}}}},u={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-form",{attrs:{model:t.form}},[i("el-form-item",{attrs:{label:"活动名称","label-width":t.formLabelWidth}},[i("el-col",{attrs:{span:8}},[i("el-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"活动时间","label-width":t.formLabelWidth},model:{value:t.form.img,callback:function(e){t.$set(t.form,"img",e)},expression:"form.img"}},[i("div",{staticClass:"block"},[i("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd",format:"yyyy-MM-dd"},model:{value:t.dateValue,callback:function(e){t.dateValue=e},expression:"dateValue"}})],1)]),t._v(" "),i("el-form-item",{attrs:{label:"一级分类","label-width":t.formLabelWidth}},[i("el-select",{on:{change:t.changeCate},model:{value:t.form.first_cateid,callback:function(e){t.$set(t.form,"first_cateid",e)},expression:"form.first_cateid"}},[i("el-option",{attrs:{label:"--请选择--",value:"",disabled:""}}),t._v(" "),t._l(t.cateList,function(t){return i("el-option",{key:t.id,attrs:{label:t.catename,value:t.id}})})],2)],1),t._v(" "),i("el-form-item",{attrs:{label:"二级分类","label-width":t.formLabelWidth}},[i("el-select",{on:{change:t.changeSecondCate},model:{value:t.form.second_cateid,callback:function(e){t.$set(t.form,"second_cateid",e)},expression:"form.second_cateid"}},[i("el-option",{attrs:{label:"--请选择--",value:"",disabled:""}}),t._v(" "),t._l(t.second_catelist,function(t){return i("el-option",{key:t.id,attrs:{label:t.catename,value:t.id}})})],2)],1),t._v(" "),i("el-form-item",{attrs:{label:"商品","label-width":t.formLabelWidth}},[i("el-select",{model:{value:t.form.goodsid,callback:function(e){t.$set(t.form,"goodsid",e)},expression:"form.goodsid"}},[i("el-option",{attrs:{label:"--请选择--",value:"",disabled:""}}),t._v(" "),t._l(t.goodslist,function(t){return i("el-option",{key:t.id,attrs:{label:t.goodsname,value:t.id}})})],2)],1),t._v(" "),i("el-form-item",{attrs:{label:"状态","label-width":t.formLabelWidth}},[i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ccc","active-value":1,"inactive-value":2},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1),t._v(" "),i("el-form-item",{attrs:{"label-width":t.formLabelWidth}},[0==t.$route.params.id?i("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确 定")]):i("el-button",{attrs:{type:"primary"},on:{click:t.update}},[t._v("修 改")])],1)],1)},staticRenderFns:[]};var m=i("VU/8")(d,u,!1,function(t){i("mCLc")},"data-v-77a43a7e",null);e.default=m.exports},"4Zld":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("Dd8w"),s=i.n(a),l=i("0T94"),o=i("f57E"),n=i("NYxO"),c=i("vLgD"),r=i("wliq"),d={components:{vAdd:l.default,vBread:o.a},data:function(){return{}},computed:s()({},Object(n.c)({seckillList:"seckill/seckillList"})),mounted:function(){this.requestSeckillList()},methods:s()({},Object(n.b)({requestBreadList:"breadListActions",requestSeckillList:"seckill/seckillListActions"}),{add:function(){this.$router.push("/seckill/seckilladd/0"),this.requestBreadList([{path:"/",name:"首页"},{path:"/seckill",name:"活动列表"},{name:"活动添加"}])},edit:function(t){this.$router.push("/seckill/seckilladd/"+t)},del:function(t){var e=this;this.$confirm("确定删除该活动?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(function(){Object(c.o)({id:t}).then(function(t){Object(r.b)(t.data.msg),e.requestSeckillrList()})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})}})},u={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-bread"),t._v(" "),i("v-add",{directives:[{name:"show",rawName:"v-show",value:this.$route.path=="/seckill/seckilladd/"+this.$route.params.id,expression:"this.$route.path == '/seckill/seckilladd/' + this.$route.params.id"}]}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"/seckill"==this.$route.path,expression:"this.$route.path == '/seckill'"}],staticClass:"list"},[i("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("添加")]),t._v(" "),i("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:t.seckillList,"row-key":"id",border:""}},[i("el-table-column",{attrs:{prop:"title",label:"名称"}}),t._v(" "),i("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?i("el-button",{attrs:{type:"success",size:"mini"}},[t._v("启用")]):i("el-button",{attrs:{type:"danger",size:"mini"}},[t._v("禁止")])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"操作","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-row",[i("el-button",{attrs:{type:"primary"},on:{click:function(i){return t.edit(e.row.id)}}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{type:"danger"},on:{click:function(i){return t.del(e.row.id)}}},[t._v("删除")])],1)]}}])})],1)],1)],1)},staticRenderFns:[]};var m=i("VU/8")(d,u,!1,function(t){i("Id90")},"data-v-698d6741",null);e.default=m.exports},Id90:function(t,e){},mCLc:function(t,e){}});
//# sourceMappingURL=2.0f54afb73b9e7b2d67b2.js.map