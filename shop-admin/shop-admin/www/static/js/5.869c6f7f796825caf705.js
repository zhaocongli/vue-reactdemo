webpackJsonp([5,15],{PZur:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Dd8w"),r=a.n(n),i=a("phcZ"),s=a("f57E"),o=a("NYxO"),l=a("vLgD"),c=a("wliq"),u={components:{vAdd:i.default,vBread:s.a},data:function(){return{}},computed:r()({},Object(o.c)({bannerList:"banner/bannerList"})),mounted:function(){this.requestBannerList()},methods:r()({},Object(o.b)({requestBreadList:"breadListActions",requestBannerList:"banner/bannerListActions"}),{add:function(){this.$router.push("/banner/banneradd/0"),this.requestBreadList([{path:"/",name:"首页"},{path:"/banner",name:"轮播图列表"},{name:"轮播图添加"}])},edit:function(t){this.$router.push("/banner/banneradd/"+t)},del:function(t){var e=this;this.$confirm("确定删除该轮播图?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(function(){Object(l.i)({id:t}).then(function(t){Object(c.b)(t.data.msg),e.requestBannerList()})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})}})},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-bread"),t._v(" "),a("v-add",{directives:[{name:"show",rawName:"v-show",value:this.$route.path=="/banner/banneradd/"+this.$route.params.id,expression:"this.$route.path == '/banner/banneradd/' + this.$route.params.id"}]}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"/banner"==this.$route.path,expression:"this.$route.path == '/banner'"}],staticClass:"list"},[a("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("添加")]),t._v(" "),a("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:t.bannerList,"row-key":"id",border:""}},[a("el-table-column",{attrs:{prop:"id",label:"编号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"轮播图标题"}}),t._v(" "),a("el-table-column",{attrs:{label:"图片"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("img",{attrs:{src:t.$preImg+e.row.img,alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?a("el-button",{attrs:{type:"primary",size:"mini"}},[t._v("启用")]):a("el-button",{attrs:{type:"danger",size:"mini"}},[t._v("禁止")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-row",[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.edit(e.row.id)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.del(e.row.id)}}},[t._v("删除")])],1)]}}])})],1)],1)],1)},staticRenderFns:[]};var m=a("VU/8")(u,d,!1,function(t){a("xNbl")},"data-v-486c69d9",null);e.default=m.exports},phcZ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Dd8w"),r=a.n(n),i=a("NYxO"),s=a("wliq"),o=a("vLgD"),l={data:function(){return{form:{title:"",img:"",status:1},formLabelWidth:"120px",imageUrl:"",bannerId:this.$route.params.id}},mounted:function(){this.changeBreadList()},methods:r()({},Object(i.b)({requestBreadList:"breadListActions",requestBannerList:"banner/bannerListActions"}),{changeBreadList:function(){void 0==this.bannerId?(this.requestBreadList([{path:"/",name:"首页"},{path:"/banner",name:"轮播图列表"}]),this.cancel()):0==this.bannerId?this.requestBreadList([{path:"/",name:"首页"},{path:"/banner",name:"轮播图列表"},{name:"轮播图添加"}]):(this.requestBreadList([{path:"/",name:"首页"},{path:"/banner",name:"轮播图列表"},{name:"轮播图修改"}]),this.bannerDetail())},changeImg:function(t){if(t.size>2097152)Object(s.c)("文件大小不能超过2M");else{var e=t.name.slice(t.name.lastIndexOf("."));[".jpg",".png",".jpeg",".gif"].some(function(t){return t==e})?(this.imageUrl=URL.createObjectURL(t.raw),this.form.img=t.raw):Object(s.c)("上传文件格式不正确")}},confirm:function(){var t=this;Object(o.a)(this.form).then(function(e){Object(s.b)(e.data.msg),t.requestBannerList(),t.cancel()})},bannerDetail:function(){var t=this;Object(o.q)({id:this.bannerId}).then(function(e){t.form=e.data.list,t.imageUrl=t.$preImg+e.data.list.img})},update:function(){var t=this;this.form.id=this.bannerId,console.log(this.form),Object(o.M)(this.form).then(function(e){Object(s.b)(e.data.msg),t.requestBannerList(),t.cancel(),t.$router.push("/banner")})},cancel:function(){this.form={title:"",img:"",status:1},this.imageUrl=""}}),watch:{$route:{deep:!0,handler:function(t){this.bannerId=t.params.id,this.changeBreadList()}}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form",{attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"标题","label-width":t.formLabelWidth}},[a("el-col",{attrs:{span:8}},[a("el-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"图片","label-width":t.formLabelWidth},model:{value:t.form.img,callback:function(e){t.$set(t.form,"img",e)},expression:"form.img"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"#","show-file-list":!1,"on-change":t.changeImg}},[t.imageUrl?a("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),a("el-form-item",{attrs:{label:"状态","label-width":t.formLabelWidth}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ccc","active-value":1,"inactive-value":2},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1),t._v(" "),a("el-form-item",{attrs:{"label-width":t.formLabelWidth}},[0==t.$route.params.id?a("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确 定")]):a("el-button",{attrs:{type:"primary"},on:{click:t.update}},[t._v("修 改")])],1)],1)},staticRenderFns:[]};var u=a("VU/8")(l,c,!1,function(t){a("tc5b")},"data-v-26b6c5e0",null);e.default=u.exports},tc5b:function(t,e){},xNbl:function(t,e){}});
//# sourceMappingURL=5.869c6f7f796825caf705.js.map