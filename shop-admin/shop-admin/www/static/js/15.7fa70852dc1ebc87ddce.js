webpackJsonp([15],{phcZ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Dd8w"),n=a.n(i),r=a("NYxO"),s=a("wliq"),l=a("vLgD"),c={data:function(){return{form:{title:"",img:"",status:1},formLabelWidth:"120px",imageUrl:"",bannerId:this.$route.params.id}},mounted:function(){this.changeBreadList()},methods:n()({},Object(r.b)({requestBreadList:"breadListActions",requestBannerList:"banner/bannerListActions"}),{changeBreadList:function(){void 0==this.bannerId?(this.requestBreadList([{path:"/",name:"首页"},{path:"/banner",name:"轮播图列表"}]),this.cancel()):0==this.bannerId?this.requestBreadList([{path:"/",name:"首页"},{path:"/banner",name:"轮播图列表"},{name:"轮播图添加"}]):(this.requestBreadList([{path:"/",name:"首页"},{path:"/banner",name:"轮播图列表"},{name:"轮播图修改"}]),this.bannerDetail())},changeImg:function(t){if(t.size>2097152)Object(s.c)("文件大小不能超过2M");else{var e=t.name.slice(t.name.lastIndexOf("."));[".jpg",".png",".jpeg",".gif"].some(function(t){return t==e})?(this.imageUrl=URL.createObjectURL(t.raw),this.form.img=t.raw):Object(s.c)("上传文件格式不正确")}},confirm:function(){var t=this;Object(l.a)(this.form).then(function(e){Object(s.b)(e.data.msg),t.requestBannerList(),t.cancel()})},bannerDetail:function(){var t=this;Object(l.q)({id:this.bannerId}).then(function(e){t.form=e.data.list,t.imageUrl=t.$preImg+e.data.list.img})},update:function(){var t=this;this.form.id=this.bannerId,console.log(this.form),Object(l.M)(this.form).then(function(e){Object(s.b)(e.data.msg),t.requestBannerList(),t.cancel(),t.$router.push("/banner")})},cancel:function(){this.form={title:"",img:"",status:1},this.imageUrl=""}}),watch:{$route:{deep:!0,handler:function(t){this.bannerId=t.params.id,this.changeBreadList()}}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form",{attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"标题","label-width":t.formLabelWidth}},[a("el-col",{attrs:{span:8}},[a("el-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"图片","label-width":t.formLabelWidth},model:{value:t.form.img,callback:function(e){t.$set(t.form,"img",e)},expression:"form.img"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"#","show-file-list":!1,"on-change":t.changeImg}},[t.imageUrl?a("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),a("el-form-item",{attrs:{label:"状态","label-width":t.formLabelWidth}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ccc","active-value":1,"inactive-value":2},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1),t._v(" "),a("el-form-item",{attrs:{"label-width":t.formLabelWidth}},[0==t.$route.params.id?a("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确 定")]):a("el-button",{attrs:{type:"primary"},on:{click:t.update}},[t._v("修 改")])],1)],1)},staticRenderFns:[]};var m=a("VU/8")(c,o,!1,function(t){a("tc5b")},"data-v-26b6c5e0",null);e.default=m.exports},tc5b:function(t,e){}});
//# sourceMappingURL=15.7fa70852dc1ebc87ddce.js.map